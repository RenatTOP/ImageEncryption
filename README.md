# ImageEncryption  
**Block-based image & video scrambling using LFSR (Python, OpenCV)**

–¶–µ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —Ä–µ–∞–ª—ñ–∑—É—î **low-cost —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è (scrambling)** –¥–ª—è –∑–æ–±—Ä–∞–∂–µ–Ω—å —Ç–∞ –≤—ñ–¥–µ–æ.  
–ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∞—Ü—é—î —à–ª—è—Ö–æ–º **—Ä–æ–∑–±–∏—Ç—Ç—è –∫–∞–¥—Ä—É –Ω–∞ –±–ª–æ–∫–∏**, –æ–ø—Ü—ñ–π–Ω–æ—ó **–ª–æ–∫–∞–ª—å–Ω–æ—ó —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—ó –±–ª–æ–∫—ñ–≤**
(rotate / flip) —Ç–∞ **–ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∏ –±–ª–æ–∫—ñ–≤** –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –ø—Å–µ–≤–¥–æ–≤–∏–ø–∞–¥–∫–æ–≤–æ–≥–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ **LFSR**.

---

## –ó–º—ñ—Å—Ç
- [–ö–æ—Ä–æ—Ç–∫–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è](#–∫–æ—Ä–æ—Ç–∫–µ-–ø–æ—è—Å–Ω–µ–Ω–Ω—è)
- [–ü—Ä–∏–∫–ª–∞–¥–∏ CLI](#–ø—Ä–∏–∫–ª–∞–¥–∏-cli)
- [–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç–∞ –∫–ª—é—á—ñ](#–ø–∞—Ä–∞–º–µ—Ç—Ä–∏-—Ç–∞-–∫–ª—é—á—ñ)
- [–ó–∞–≥–∞–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞](#–∑–∞–≥–∞–ª—å–Ω–∞-–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞)
- [–ê–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–±–æ—Ç–∏](#–∞–ª–≥–æ—Ä–∏—Ç–º-—Ä–æ–±–æ—Ç–∏)
- [–û–ø–∏—Å –º–æ–¥—É–ª—ñ–≤](#–æ–ø–∏—Å-–º–æ–¥—É–ª—ñ–≤)
- [–†–æ–±–æ—Ç–∞ –∑ –≤—ñ–¥–µ–æ](#—Ä–æ–±–æ—Ç–∞-–∑-–≤—ñ–¥–µ–æ)
- [–ü—Ä–∏–∫–ª–∞–¥ –æ–±—Ä–æ–±–∫–∏](#–ø—Ä–∏–∫–ª–∞–¥-–æ–±—Ä–æ–±–∫–∏)
---

## –ö–æ—Ä–æ—Ç–∫–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è

### Encrypt
1. –ö–∞–¥—Ä / –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è **–ø–∞–¥–¥–∏—Ç—å—Å—è** –¥–æ –∫—Ä–∞—Ç–Ω–æ—Å—Ç—ñ `tile_size`
2. –î—ñ–ª–∏—Ç—å—Å—è –Ω–∞ –±–ª–æ–∫–∏ `tile_size √ó tile_size`
3. –î–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ä–∞—É–Ω–¥—É:
   - (–æ–ø—Ü—ñ–π–Ω–æ) rotate/flip –∫–æ–∂–Ω–æ–≥–æ –±–ª–æ–∫—É
   - –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–ª–æ–∫—ñ–≤ (Fisher‚ÄìYates) –∑ PRNG –Ω–∞ LFSR
4. –ë–ª–æ–∫–∏ –∑–±–∏—Ä–∞—é—Ç—å—Å—è –Ω–∞–∑–∞–¥
5. Padding –ø—Ä–∏–±–∏—Ä–∞—î—Ç—å—Å—è

### Decrypt
1. –†–æ–±–∏—Ç—å—Å—è **—Ç–æ–π —Å–∞–º–∏–π padding**
2. –ë–ª–æ–∫–∏ –¥—ñ–ª—è—Ç—å—Å—è —Ç–∞–∫ —Å–∞–º–æ
3. –†–∞—É–Ω–¥–∏ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è **—É –∑–≤–æ—Ä–æ—Ç–Ω–æ–º—É –ø–æ—Ä—è–¥–∫—É**:
   - inverse permutation
   - inverse rotate/flip
4. –ó–±—ñ—Ä–∫–∞ –∫–∞–¥—Ä—É + unpad

Encrypt —ñ decrypt **—Å–∏–º–µ—Ç—Ä–∏—á–Ω—ñ**.  
–ë—É–¥—å-—è–∫–∞ –Ω–µ–≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ ‚Üí –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

---

## –ü—Ä–∏–∫–ª–∞–¥–∏ CLI

### –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è
```bash
python encrypt_image.py media/input.png media/encrypt.png --seed 333 --tile-size 64 --rounds 5
python decrypt_image.py media/encrypt.png media/decrypt.png --seed 333 --tile-size 64 --rounds 5
```

### –í—ñ–¥–µ–æ
```bash
python encrypt_video.py media/input.mp4 media/encrypt.mp4 --seed 333 --tile-size 64 --rounds 5
python decrypt_video.py media/encrypt.mp4 media/decrypt.mp4 --seed 333 --tile-size 64 --rounds 5
```

## –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ç–∞ –∫–ª—é—á—ñ

| –ü–∞—Ä–∞–º–µ—Ç—Ä         | –û–ø–∏—Å                      |
| ---------------- | ------------------------- |
| `seed`           | –ö–ª—é—á (LFSR initial state) |
| `tile-size`      | –†–æ–∑–º—ñ—Ä –±–ª–æ–∫—É (px)         |
| `rounds`         | –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–∞—É–Ω–¥—ñ–≤         |
| `--no-transform` | –í–∏–º–∫–Ω—É—Ç–∏ rotate/flip      |
| `codec`          | –í—ñ–¥–µ–æ–∫–æ–¥–µ–∫                |

üî¥ **–í–ê–ñ–õ–ò–í–û**
–ü–∞—Ä–∞–º–µ—Ç—Ä–∏ seed / tile-size / rounds / no-transform –º–∞—é—Ç—å –±—É—Ç–∏ —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ –¥–ª—è encrypt —ñ decrypt.

## –ó–∞–≥–∞–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞
```
ImageEncryption/
‚îú‚îÄ‚îÄ media/              # —Ç–µ–∫–∞ —Ñ–∞–π–ª—ñ–≤ –¥–ª—è –æ–±—Ä–æ–±–∫–∏
‚îú‚îÄ‚îÄ cipher.py           # —è–¥—Ä–æ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è
‚îú‚îÄ‚îÄ tiles.py            # —Ä–æ–±–æ—Ç–∞ –∑ –±–ª–æ–∫–∞–º–∏ (split / merge / padding)
‚îú‚îÄ‚îÄ lfsr.py             # LFSR –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
‚îú‚îÄ‚îÄ prng.py             # randint() –ø–æ–≤–µ—Ä—Ö LFSR
‚îú‚îÄ‚îÄ video_pipeline.py   # –ø–æ–∫–∞–¥—Ä–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ –≤—ñ–¥–µ–æ
‚îú‚îÄ‚îÄ encrypt_image.py    # CLI: encrypt image
‚îú‚îÄ‚îÄ decrypt_image.py    # CLI: decrypt image
‚îú‚îÄ‚îÄ encrypt_video.py    # CLI: encrypt video
‚îú‚îÄ‚îÄ decrypt_video.py    # CLI: decrypt video
‚îú‚îÄ‚îÄ config.py           # –¥–µ—Ñ–æ–ª—Ç–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
‚îî‚îÄ‚îÄ README.md
```

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–æ–±–æ—Ç–∏

### –ü–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–ª–æ–∫—ñ–≤
   * –ö—ñ–ª—å–∫—ñ—Å—Ç—å –±–ª–æ–∫—ñ–≤:  
     `N = (H_pad / tile_size) √ó (W_pad / tile_size)`
   * –ì–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –ø–µ—Ä–µ—Å—Ç–∞–Ω–æ–≤–∫–∞ perm[0..N-1]
   * –ë–ª–æ–∫ i –ø–µ—Ä–µ–º—ñ—â—É—î—Ç—å—Å—è —É –ø–æ–∑–∏—Ü—ñ—é perm[i]

### PRNG
   * –ë–∞–∑—É—î—Ç—å—Å—è –Ω–∞ Fibonacci LFSR
   * Seed ‚â† 0
   * –î–ª—è shuffle –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è randint() –∑ rejection sampling

### –¢—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ—è –±–ª–æ–∫—ñ–≤
   * –î–ª—è –∫–æ–∂–Ω–æ–≥–æ –±–ª–æ–∫—É –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è code ‚àà [0..7]:
   * 2 –±—ñ—Ç–∏ - –ø–æ–≤–æ—Ä–æ—Ç (0¬∞, 90¬∞, 180¬∞, 270¬∞)
   * 1 –±—ñ—Ç - –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–∏–π flip

## –û–ø–∏—Å –º–æ–¥—É–ª—ñ–≤
`lfsr.py`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ø—Å–µ–≤–¥–æ–≤–∏–ø–∞–¥–∫–æ–≤–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –±—ñ—Ç—ñ–≤
* LFSR(width, taps, state)
* step_bit() - 1 –∫—Ä–æ–∫ —Ä–µ–≥—ñ—Å—Ç—Ä—É
* randbits(n) - n –ø—Å–µ–≤–¥–æ–≤–∏–ø–∞–¥–∫–æ–≤–∏—Ö –±—ñ—Ç—ñ–≤

---

`prng.py`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–∏—Ö —Ü—ñ–ª–∏—Ö —á–∏—Å–µ–ª
* `LfsrPrng.randint(a, b)`
* –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î rejection sampling (–±–µ–∑ bias)
---

`tiles.py`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** —Ä–æ–±–æ—Ç–∞ –∑ –±–ª–æ–∫–∞–º–∏
* `pad_to_tile_size()` - padding –¥–æ –∫—Ä–∞—Ç–Ω–æ—Å—Ç—ñ tile_size
* `unpad_tile_size()` - –æ–±—Ä—ñ–∑–∫–∞ padding
* `split_tiles()` - –ø–æ–¥—ñ–ª –Ω–∞ –±–ª–æ–∫–∏
* `merge_tiles()` - –∑–±–∏—Ä–∞–Ω–Ω—è –Ω–∞–∑–∞–¥

–ì–∞—Ä–∞–Ω—Ç—É—î –æ–¥–Ω–∞–∫–æ–≤–∏–π —Ä–æ–∑–º—ñ—Ä —É—Å—ñ—Ö –±–ª–æ–∫—ñ–≤.

---

`cipher.py`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** —è–¥—Ä–æ —à–∏—Ñ—Ä—É
* `build_permutation()` - Fisher-Yates shuffle
* `invert_permutation()`
* `apply_permutation()`
* `transform_tile()` / `inverse_transform_tile()`
* `encrypt_image()`
* `decrypt_image()`

–°–∞–º–µ —Ç—É—Ç —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ —Å–∏–º–µ—Ç—Ä—ñ—è encrypt/decrypt.

---

`video_pipeline.py`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –æ–±—Ä–æ–±–∫–∞ –≤—ñ–¥–µ–æ –∫–∞–¥—Ä –∑–∞ –∫–∞–¥—Ä–æ–º
* `VideoJob` - –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–∞–¥–∞—á—ñ
* `process_video()`:
   * `VideoCapture`
   * encrypt/decrypt –∫–æ–∂–Ω–æ–≥–æ –∫–∞–¥—Ä—É
   * `VideoWriter`
   * safety resize

---

### CLI —Ñ–∞–π–ª–∏

`encrypt_image.py` / `decrypt_image.py`
`encrypt_video.py` / `decrypt_video.py`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ —Ç–∞ –≤–∏–∫–ª–∏–∫ —è–¥—Ä–∞.

## –†–æ–±–æ—Ç–∞ –∑ –≤—ñ–¥–µ–æ

* –í—ñ–¥–µ–æ –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –ø–æ–∫–∞–¥—Ä–æ–≤–æ
* Padding —Ä–æ–±–∏—Ç—å—Å—è –Ω–∞ –∫–æ–∂–Ω–æ–º—É –∫–∞–¥—Ä—ñ
* –ü—ñ—Å–ª—è merge –∫–∞–¥—Ä –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É


## –ü—Ä–∏–∫–ª–∞–¥ –æ–±—Ä–æ–±–∫–∏
`input.png`  
![](media/input.png)

`encode.png`  
![](media/encrypt.png)

`decode.png`  
![](media/decrypt.png)